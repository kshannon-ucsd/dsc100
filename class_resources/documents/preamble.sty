\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{preamble}

\usepackage{amsmath, amsthm, amssymb}
\usepackage[backend=biber]{biblatex}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{enumerate}
\usepackage{enumitem}
\usepackage{fancyhdr}
\usepackage{fontenc}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{inputenc}
\usepackage{listings}
\usepackage{mdframed}
\usepackage{parskip}
\usepackage{tikz}
\usepackage{titling}
\usepackage{xcolor}


\geometry{letterpaper, margin=1in}

% Define command for subtitle
\newcommand{\subtitle}[1]{\def\thesubtitle{#1}}

% Redefining maketitle to include subtitle and style the title
\renewcommand{\maketitle}{
    \begin{center}
		{\Huge\bfseries \thetitle}\\[1em] % Title in larger bold font with space after
		{\large\itshape \thesubtitle}\\[1.5em] % Subtitle in italic with space after
		{\large \theauthor}\\
		{\large \thedate}\\
    \end{center}
}

% Header configuration
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\thetitle} % Using the title
\fancyhead[R]{\thedate}
\renewcommand{\headrulewidth}{0.4pt}
\rfoot{Page \thepage}
\fancyfoot[L]{\printbibliography[heading=none]}
\renewcommand{\footrulewidth}{0.4pt}


\addbibresource{references.bib}

% Hyperlink setup
\hypersetup{
	colorlinks=true,
	linkcolor=blue,
	filecolor=magenta,
	urlcolor=cyan,
}

% Custom theorem environments
\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newtheorem{example}{Example}

% Custom colors for code listings
\definecolor{keil-bg}{RGB}{247, 247, 247}
\definecolor{keil-yellow}{RGB}{172, 151, 57}
\definecolor{keil-blue}{RGB}{66, 123, 161}
\definecolor{keil-purple}{RGB}{134, 54, 89}
\definecolor{keil-green}{RGB}{111, 148, 81}
\definecolor{keil-red}{RGB}{176, 55, 71}
\definecolor{keil-gray}{RGB}{92, 99, 112}

% Code listing style
\lstdefinestyle{keil}{
	backgroundcolor=\color{keil-bg},
	commentstyle=\color{keil-gray},
	keywordstyle=\color{keil-purple},
	numberstyle=\tiny\color{keil-gray},
	stringstyle=\color{keil-green},
	basicstyle=\ttfamily\footnotesize\color{keil-blue},
	breakatwhitespace=false,
	breaklines=true,
	captionpos=b,
	keepspaces=true,
	numbers=left,
	numbersep=5pt,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=2,
	emph={True, False},
	emphstyle=\color{keil-yellow},
	identifierstyle=\color{keil-blue},
	literate=*{:}{{\textcolor{keil-red}{:}}}{1}%
	{=}{{\textcolor{keil-red}{=}}}{1}%
	{-}{{\textcolor{keil-red}{-}}}{1}%
	{+}{{\textcolor{keil-red}{+}}}{1}%
	{*}{{\textcolor{keil-red}{*}}}{1},
	frame=single,
	framesep=10pt, % padding for the listing
	rulecolor=\color{keil-bg}, % same color as background to hide the border
	xleftmargin=10pt, % left margin
	xrightmargin=10pt, % right margin
}

\lstset{style=keil}

\endinput
